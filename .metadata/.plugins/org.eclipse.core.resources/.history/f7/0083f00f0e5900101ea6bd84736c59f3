package demo;

import io.restassured.RestAssured;
import io.restassured.path.json.JsonPath;

import static io.restassured.RestAssured.*;

public class JiraBug {

	public static void main(String[] args) {
		
		RestAssured.baseURI = "https://skykite20.atlassian.net";
		String createIssue =
		 given()
		.header("Content-Type","application/json")
		.header("Authorization","Basic c2t5a2l0ZTIwQGdtYWlsLmNvbTpBVEFUVDN4RmZHRjBHdGdFTE5rNDJEdUI1bzJrQ19lbzlNZm1OcUZ0Uy1mMG5ndXQ4bjRmUGVZTXowN08wZm56dXdEVWEwS3cxX1kzMzVIaWpfVlpJWDlLZ0gyWEdVaC1ESGYzREY1ZlZFWjhKWFZkUTlOQzM5dFBaRWpjcnk1ZFM0cnhXZldCeXJUbVZVZFVzcW1vY0Y1TU9TNlhmNFd1aUNTbkpRQXFTcVhfLWprTEQzUWZsUUk9MUFEOTczRDE=")
		.body("{\r\n"
				+ "\r\n"
				+ "  \"fields\": {\r\n"
				+ "\r\n"
				+ "    \"project\": {\r\n"
				+ "\r\n"
				+ "      \"key\": \"SCRUM\"\r\n"
				+ "\r\n"
				+ "    },\r\n"
				+ "\r\n"
				+ "    \"summary\": \"Links not working\",\r\n"
				+ "\r\n"
				+ "    \"description\": {\r\n"
				+ "\r\n"
				+ "      \"type\": \"doc\",\r\n"
				+ "\r\n"
				+ "      \"version\": 1,\r\n"
				+ "\r\n"
				+ "      \"content\": [\r\n"
				+ "\r\n"
				+ "        {\r\n"
				+ "\r\n"
				+ "          \"type\": \"paragraph\",\r\n"
				+ "\r\n"
				+ "          \"content\": [\r\n"
				+ "\r\n"
				+ "            {\r\n"
				+ "\r\n"
				+ "              \"text\": \"Creating of an issue using project keys and issue type names using the REST API.\",\r\n"
				+ "\r\n"
				+ "              \"type\": \"text\"\r\n"
				+ "\r\n"
				+ "            }\r\n"
				+ "\r\n"
				+ "          ]\r\n"
				+ "\r\n"
				+ "        }\r\n"
				+ "\r\n"
				+ "      ]\r\n"
				+ "\r\n"
				+ "    },\r\n"
				+ "\r\n"
				+ "    \"issuetype\": {\r\n"
				+ "\r\n"
				+ "      \"name\": \"Bug\"\r\n"
				+ "\r\n"
				+ "    }\r\n"
				+ "\r\n"
				+ "  }\r\n"
				+ "\r\n"
				+ "}")
		.log().all()
		.when()
		.post("/rest/api/3/issue")
		.then().log().all().assertThat().statusCode(200).extract().response().asString();
		
		JsonPath js1 = new JsonPath(createIssue);
		System.out.println(js1.getString("id"));
		
	}
}
